---
jenkins_java_home: '/usr/lib/jvm/java'

jenkins_soft_url: 'http://mirrors.aliyun.com/jenkins'

jenkins_script:
  - { src: 'libwrapper.so', dest: '{{ jenkins_path }}/jenkins/libs' }
  - { src: 'wrapper.jar', dest: '{{ jenkins_path }}/jenkins/libs' }
  - { src: 'wrapper', dest: '{{ jenkins_path }}/jenkins/bin' }
  - { src: 'jenkins.init', dest: '{{ jenkins_path }}/jenkins/bin' }

jenkins_conf:
  - { src: 'wrapper.conf', dest: '{{ jenkins_path }}/jenkins/conf/wrapper.conf', mode: '640', owner: '{{ jenkins_arg.user }}' }
  - { src: 'fix-jnlp-port.groovy', dest: '{{ jenkins_path }}/jenkins/init.groovy.d/fix-jnlp-port.groovy', mode: '640', owner: '{{ jenkins_arg.user }}' }
  - { src: 'security.groovy', dest: '{{ jenkins_path }}/jenkins/init.groovy.d/security.groovy', mode: '640', owner: '{{ jenkins_arg.user }}', create: '{{ jenkins_master_status != "200" }}' }
  - { src: 'jenkins.service', dest: '/lib/systemd/system/jenkins.service', mode: '644', owner: 'root' }

jenkins_python_dependent_packages:
  - 'pip'
  - 'cryptography'

jenkins_pypi_url: 'pypi.tuna.tsinghua.edu.cn'

jenkins_nodes: "\
  {% set _jenkins_nodes = [] %}\
  {% for host in groups[group_names[0]] %}\
    {% if _jenkins_nodes.append(hostvars[host]['ansible_host']) %}{% endif %}\
  {% endfor %}\
  {{ _jenkins_nodes }}"
